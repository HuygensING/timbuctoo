<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<title>Timbuctoo: Bridge to networked research data</title>
<style>
@import url(http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.css);
/* normalize.css v2.1.1 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address styling not present in IE 8/9. */
[hidden] { display: none; }

/* ========================================================================== Base ========================================================================== */
/** 1. Prevent system color scheme's background color being used in Firefox, IE, and Opera. 2. Prevent system color scheme's text color being used in Firefox, IE, and Opera. 3. Set default font family to sans-serif. 4. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { background: #fff; /* 1 */ color: #000; /* 2 */ font-family: sans-serif; /* 3 */ -ms-text-size-adjust: 100%; /* 4 */ -webkit-text-size-adjust: 100%; /* 4 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

a:focus { outline: none; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #6c818f; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #444444; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #111111; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.5; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: ff-meta-web-pro-1, ff-meta-web-pro-2, Arial, "Helvetica Neue", sans-serif; font-weight: bold; font-style: normal; color: #465158; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #909ea7; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: "Consolas", "Deja Vu Sans Mono", "Bitstream Vera Sans Mono", monospace; font-weight: normal; color: #444444; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.5; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 0; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3em; font-weight: bold; }
dl dd { margin-bottom: 0.75em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: black; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #748590; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #748590; }

blockquote, blockquote p { line-height: 1.5; color: #909ea7; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Print styles.  Inlined to avoid required HTTP connection: www.phpied.com/delay-loading-your-print-css/ Credit to Paul Irish and HTML5 Boilerplate (html5boilerplate.com)
*/
.print-only { display: none !important; }

@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; /* h5bp.com/t */ }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 0 #dddddd; }
table thead, table tfoot { background: none; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 1px 8px 1px 5px; font-size: 1em; color: #222222; text-align: left; }
table tr th, table tr td { padding: 1px 8px 1px 5px; font-size: 1em; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: none; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.5; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: 0.95em; padding: 0; white-space: nowrap; background-color: #f2f2f2; border: 0 solid #dddddd; -webkit-border-radius: 6px; border-radius: 6px; text-shadow: none; }

pre, pre > code { line-height: 1.2; color: inherit; font-family: "Consolas", "Deja Vu Sans Mono", "Bitstream Vera Sans Mono", monospace; font-weight: normal; }

kbd.keyseq { color: #333333; }

kbd:not(.keyseq) { display: inline-block; color: black; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

kbd kbd:first-child { margin-left: 0; }

kbd kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: black; }

p a > code:hover { color: #373737; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#header { margin-bottom: 2.5em; }
#header > h1 { color: #111111; font-weight: bold; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #909ea7; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }

#toc { border-bottom: 1px solid #dddddd; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }

#toctitle { color: #6c818f; }

@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #dddddd; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 6px; border-radius: 6px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }

#content #toctitle { font-weight: bold; font-family: ff-meta-web-pro-1, ff-meta-web-pro-2, Arial, "Helvetica Neue", sans-serif; font-size: 1em; padding-left: 0.125em; }

#footer { max-width: 100%; background-color: black; padding: 1.25em; }

#footer-text { color: white; line-height: 1.35; }

.sect1 { padding-bottom: 1.25em; }

.sect1 + .sect1 { border-top: 1px solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #465158; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #3b444a; }

.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }

.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #909ea7; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 6px; border-radius: 6px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }

.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 6px; border-radius: 6px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #6c818f; margin-top: 0; line-height: 1.5; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock > .content pre, .listingblock > .content pre { background: #eeeeee; border-width: 1px; border-style: solid; border-color: #cccccc; -webkit-border-radius: 6px; border-radius: 6px; padding: 0.5em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.76em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.855em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.95em; } }

.listingblock > .content { position: relative; }

.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }

.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }

table.pyhltable { border: 0; margin-bottom: 0; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }

.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }

.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: 0.8125em; color: #748590; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }

table thead th, table tfoot th { font-weight: bold; }

table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 6px; border-radius: 6px; border-top: 0 solid #dddddd; border-bottom: 0 solid #dddddd; }

table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }

table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }

table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }

th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }

th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }

th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }

th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }

th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }

th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }

p.tableblock.header { color: #222222; font-weight: bold; }

td > div.verse { white-space: pre; }

ol { margin-left: 0.25em; }

ul li ol { margin-left: 0; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1 { padding-right: .8em; font-weight: bold; }

td.hdlist1, td.hdlist2 { vertical-align: top; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.qanda > ol > li > p > em:only-child { color: #373737; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }

.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #444444; color: #333333; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum { display: inline-block; color: white !important; background-color: black; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }

h4 { color: #6c818f; }

.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 6px; border-radius: 6px; margin-left: 2em; margin-right: 2em; }

.admonitionblock { margin-left: 2em; margin-right: 2em; }
.admonitionblock > table { border: 1px solid #609060; border-top-width: 1.5em; background-color: #e9ffe9; border-collapse: separate; -webkit-border-radius: 0; border-radius: 0; }
.admonitionblock > table td.icon { padding-top: .5em; padding-bottom: .5em; }
.admonitionblock > table td.content { padding: .5em 1em; color: black; font-size: .9em; border-left: none; }

.sidebarblock { background-color: #e8ecef; border-color: #ccc; }
.sidebarblock > .content > .title { color: #444444; }

table.tableblock.grid-all { border-collapse: collapse; -webkit-border-radius: 0; border-radius: 0; }
table.tableblock.grid-all th.tableblock, table.tableblock.grid-all td.tableblock { border-bottom: 1px solid #aaa; }

#footer { background-color: #465158; padding: 2em; }

#footer-text { color: #eee; font-size: 0.8em; text-align: center; }

</style>
<style>
  .feature:before {
    content: "🎁 "
  }
  .bug:before {
    content: "🐛 "
  }
  .feature {
    border-width: thin;
    border-color: #6495ed;
    border-style: solid;
    background-color: #f0f8ff;
    border-radius: 4px;
    padding-right: 0.3em;
  }
  .bug {
    border-width: thin;
    border-color: #8c8c5d;
    border-style: solid;
    background-color: #ffffe0;
    border-radius: 4px;
    padding-right: 0.3em;
  }
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Timbuctoo: Bridge to networked research data</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#_background">Background</a></li>
<li><a href="#_history">History</a></li>
<li><a href="#_getting_up_and_running">Getting up and running</a></li>
</ul>
</li>
<li><a href="#_software_components">Software Components</a>
<ul class="sectlevel2">
<li><a href="#_overview">Overview</a></li>
<li><a href="#_database_access_core">Database access / core</a></li>
<li><a href="#_crud">CRUD</a></li>
<li><a href="#_tabular_data_importer">Tabular data importer</a></li>
<li><a href="#_rml_implementation">RML implementation</a></li>
<li><a href="#_rdf_import">RDF import</a></li>
<li><a href="#_resource_sync">Resource sync</a></li>
<li><a href="#_resource_sync_example_server">Resource sync example server</a></li>
<li><a href="#_solr_index_script">Solr index script</a></li>
</ul>
</li>
<li><a href="#_user_guide">User guide</a></li>
<li><a href="#_api_documentation">API documentation</a></li>
<li><a href="#_development_process">Development process</a>
<ul class="sectlevel2">
<li><a href="#_releases">Releases</a></li>
<li><a href="#_bug_tracking">Bug tracking</a></li>
</ul>
</li>
<li><a href="#_additional_information">Additional information</a>
<ul class="sectlevel2">
<li><a href="#_presentations">Presentations</a></li>
<li><a href="#_related_work">Related work</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This software is developed and supported by the <a href="http://huygens.knaw.nl">Huygens Institute</a> in the Netherlands.
We intend to support the software indefinitely, but <strong>2018</strong> is our current planning horizon.
This notice will be updated before the end of 2018 with the new support duration.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Support means that we&#8217;ll review your <a href="https://github.com/huygensing/timbuctoo/pulls">pull requests</a>, respond to <a href="https://github.com/huygensing/timbuctoo/issues">issues</a> and answer questions on the <a href="http://gitter.im/huygensing/timbuctoo">chat</a>.</p>
</li>
<li>
<p>It does not mean that we&#8217;ll fix every issue that you raise.</p>
</li>
<li>
<p>But it does mean that we&#8217;ll commit regularly with new features or patches (usually every workday).</p>
</li>
<li>
<p>While we try to make timbuctoo run everywhere, we&#8217;re actively running it on Redhat 6. Using it on other platforms may trigger bugs that we are not aware of (and that you should report!)</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Links to files are broken. I have reported the issue at <a href="https://github.com/asciidoctor/asciidoctor/issues/1903" class="bare">github.com/asciidoctor/asciidoctor/issues/1903</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_background">Background</h3>
<div class="paragraph">
<p>Timbuctoo is aimed at historians doing interpretative research.
Such a researcher collects facts from various documents, interprets and structures them, and creates tables of these facts.
The researcher then uses this new dataset either as an object to do analysis on, or as an index that allows them to look at their sources from a distance quickly stepping back to the original source for the real interpretative work.</p>
</div>
<div class="paragraph">
<p>As such an historian you often need to categorize your findings.
For example: you keep track of birthplaces.
You then need to decide how to write down the birthplace</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Do you use the name of the city, or the burrough?</p>
</li>
<li>
<p>Do you use the current name or the name when the person was born?</p>
</li>
<li>
<p>If your dataset spans a long time you might have two different cities on the same geographical location. Are they one name or more?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These judgements are sometimes the core of your research and sometimes incidental to it.
Timbuctoo aims to make it easier to publish your research dataset and then to re-use other people&#8217;s published datasets.
To continue the example: another researcher might create a dataset containing locations, their coördinates and names and how that changed over time. You can then re-use that dataset and link to the entries instead of typing a string of characters that a humand might correctly interpret or not.</p>
</div>
<div class="paragraph">
<p>There are database-like systems, so storing your data somewhere is easy.
However, there are not many tools that will:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>allow you to upload any dataset without having to write code, (for most database importing large datasets will require you to write some amount of SQL, SPARQL or batch processing code)</p>
</li>
<li>
<p>expose your dataset so that it can be retrieved by another researcher (a http download and a REST interface)</p>
</li>
<li>
<p>allow the researcher to base it&#8217;s new dataset on that existing dataset</p>
<div class="ulist">
<ul>
<li>
<p>with a provenance trail</p>
</li>
<li>
<p>without having to agree on the data model</p>
</li>
<li>
<p>without having to agree on all data contents</p>
</li>
</ul>
</div>
</li>
<li>
<p>keep track of updates to the source dataset and allow the user to subscribe to these changes</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Which is the added value timbuctoo will bring.</p>
</div>
<div class="paragraph">
<p>A lot of applications go quite some part of the distance however, so timbuctoo mostly glue between these applications.</p>
</div>
</div>
<div class="sect2">
<h3 id="_history">History</h3>
<div class="paragraph">
<p>Timbuctoo was started in 2012.</p>
</div>
</div>
<div class="sect2">
<h3 id="_getting_up_and_running">Getting up and running</h3>
<div class="sect3">
<h4 id="_sneak_peek">Sneak peek</h4>
<div class="paragraph">
<p>To get a quick look at timbuctoo go to: <a href="https://acc.repository.huygens.knaw.nl" class="bare">acc.repository.huygens.knaw.nl</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_1_system_requirements">1. System requirements</h4>

</div>
<div class="sect3">
<h4 id="_2_building_it">2. Building it</h4>
<div class="paragraph">
<p>This tool has been verified to work on Redhat 6.
To build your own version, you can either have 'java 8' and 'maven 3' installed or use the maven3 docker container.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>build</strong> using <code>mvn clean package</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_3_running_it">3. Running it</h4>
<div class="ulist">
<ul>
<li>
<p>Do a quick <strong>debug run</strong> using <code>./devtools/debugrun/debugrun.sh</code> or <code>docker-compose up</code>.
If you do not use docker the external services, such as solr won&#8217;t be started.
Timbuctoo will still run and the API will run fine, but some urls in the web GUI won&#8217;t work.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To run a real version you&#8217;d run all services mentioned in the docker-compose.yml file yourself and start timbuctoo using <code>./timbuctoo-instancev4/target/appassembler/bin/timbuctoo server &lt;your config&gt;.yaml</code>.
You can use example_config.yaml for inspiration.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>After launching it you should be greated by a login page.</p>
</li>
<li>
<p>After logging in you should be able to upload an excel file (or download the default excel file). The wizard will guide you onwards.</p>
</li>
<li>
<p>When a dataset is uploaded you can edit it, and query it.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_4_installing_it">4. installing it</h4>
<div class="ulist">
<ul>
<li>
<p><strong>install/package timbuctoo</strong> by copying the target/appassembler folder wherever you like (i.e. <code>mv timbuctoo-instancev4/target/appassembler/ my-install-location</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_software_components">Software Components</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview">Overview</h3>
<div class="paragraph">
<p>Timbuctoo is a set of REST api&#8217;s on top of a graph database that stores RDF. <abbr title="http api">REST</abbr></p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-923bd435e03703a067a92955c3613d58.png" alt="diag 923bd435e03703a067a92955c3613d58" width="1550" height="434">
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Changelog</dt>
<dd>
<p><span class="feature">The changelog will provide a chronological list of additions or deletions filtered by either the entity or the dataset</span>.
The changelog API isn&#8217;t available yet, but the data to generate it is already being saved. So when the API becomes available it will expose the data retroactively.</p>
</dd>
<dt class="hdlist1">RDF-publication</dt>
<dd>
<p><span class="feature">We will publish the RDF data in the CLARIAH RDF exchange format</span>.</p>
</dd>
<dt class="hdlist1">The V2.1 API</dt>
<dt class="hdlist1">CRUD</dt>
<dd>
<p>The crud service offers an interpreted view of the RDF data. It might for example fold a list expressed as blank nodes in RDF into the the entity that references them.
Provenance information is included as part of the entity it belongs to.</p>
</dd>
<dt class="hdlist1">Metadata</dt>
<dd>
<p>A dataset contains information about the property names (predicates) that are in use etc.
This information cannot be retrieved from the CRUD endpoint, but can be retrieved from here.
This module is not really documented, you can read <a href="../timbuctoo-instancev4/src/main/java/nl/knaw/huygens/timbuctoo/server/endpoints/v2/Metadata.java">the source</a> though.</p>
</dd>
<dt class="hdlist1">Autocomplete</dt>
<dd>
<p>Timbuctoo allows you to do a quick search on the labels (aka displaynames) of the entities.
This is implemented as part of the CRUD module.</p>
</dd>
<dt class="hdlist1">Tabular data importer</dt>
<dd>
<p>This package allows you to upload something that is tabular-like and have it converted to a basic RDF representation (just records pointing to the next record).
<span class="bug">The data entered like this is not yet part of the changelog, but should be.</span></p>
</dd>
<dt class="hdlist1">RML processor</dt>
<dd>
<p>Once you have uploaded some data in a tabular representation you can call the RML processor with an RML document to generate RDF which is then inserted into the database.
The processor calls the RDF importer in the background with the generated triples.</p>
</dd>
<dt class="hdlist1">RDF importer</dt>
<dd>
<p>The RDF importer can be provided with a dataset in n-triples format that will then be inserted as-is into the database.</p>
</dd>
<dt class="hdlist1">Resource sync</dt>
<dd>
<p>Timbuctoo can discover and download datasets from remote servers that contain resourcesync descriptions.</p>
</dd>
<dt class="hdlist1">Search GUI &amp; Index crawler</dt>
<dd>
<p>== Summary</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>These ruby scripts harvest the timbuctoo CRUD endpoint, format the data and send it to solr.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Discover-GUI</dt>
<dd>
<p>A gui that is not aimed at precise querying, but rather to get a high-level overview of the data so that you know what queries to write.</p>
</dd>
<dt class="hdlist1">Dataset-search</dt>
<dd>
<p>find subjects using their properties and then find the datasets that contain them</p>
</dd>
<dt class="hdlist1">Data curation tools</dt>
<dd>
<p>Tools for cleaning up datasets. We&#8217;re mostly implementing this by working together with existing tools.</p>
</dd>
<dt class="hdlist1">Data-export</dt>
<dd>
<p>Render the timbuctoo data as RDF, graphviz and whatnot. This epic might also focus on generating data representations in a semantic form that can be well imported by other tools. (i.e. use the proper date-time encoding or geo-coordinates encoding)</p>
</dd>
<dt class="hdlist1">Dataset-interdependencies</dt>
<dd>
<p>Be able to depend on other datasets.</p>
<div class="ulist">
<ul>
<li>
<p>Link to RDF subjects in a specific other dataset</p>
</li>
<li>
<p><span class="feature">Import (parts of) other datasets into your own dataset</span></p>
</li>
<li>
<p><span class="feature">Create a new (read-only?) dataset that is fully dependent on other datasets</span></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Next to these core endpoints we also have:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">An authentication endpoint</dt>
<dd>
<p>This allows users to sign in.
We will probably remove the code once the project that we&#8217;re part of (CLARIAH) provides a good openid2 implementation.</p>
</dd>
<dt class="hdlist1">Authorization handling</dt>
<dd>
<p><span class="feature">User management that specifies who is allowed to see your data</span>. Currently only a basic form is implemented (only you are allowed to edit your own datasets).</p>
</dd>
<dt class="hdlist1">A D3 graph render endpoint</dt>
<dd>
<p>This will probably be removed after we have built the new CRUD Api</p>
</dd>
<dt class="hdlist1">A raw query endpoint</dt>
<dd>
<p>This is for development use only</p>
</dd>
<dt class="hdlist1">A jsenv endpoint</dt>
<dd>
<p>This is a quick way to pass some data from the configuration file to the javascript applications.
We&#8217;re not sure if we&#8217;re keeping this around.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>These are all the user facing components. Other packages are supporting these components.</p>
</div>
</div>
<div class="sect2">
<h3 id="_database_access_core">Database access / core</h3>
<div class="sect3">
<h4 id="_context">Context</h4>
<div class="paragraph">
<p>We are using a database, but we&#8217;re not convinced that it&#8217;s the best one.
We would like to be able to switch to other databases and the <strong>evaluate</strong> whether other databases make more sense.</p>
</div>
<div class="paragraph">
<p>Furthermore TinkerPop requires us to handle transactions thoughtfully but provides a rather lax API.
We&#8217;d like to access the database only in a correct manner.</p>
</div>
</div>
<div class="sect3">
<h4 id="_goal">Goal</h4>
<div class="paragraph">
<p>We add three classes</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>TransactionEnforcer that helps to wrap all database using work in a transaction.
The transactionEnforcer API makes it clear to the client code when transaction starts and makes it impossible to forget to close it.</p>
</li>
<li>
<p>TimbuctooActions that is autocloseable around a transaction.
It contains the business logic (authorization, UUID generation etc.)</p>
</li>
<li>
<p>DataStoreOperations that is autocloseable around a transaction and performs the actual database work</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These classes have the following constraints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>~~no two transaction may run at the same time~~ (will be possible once no code uses graphWrapper directly anymore)</p>
</li>
<li>
<p>Each method returns an Immutable Value object without TinkerPop or Neo4j references.
(So that Timbuctoo is less dependent on one database implementation)</p>
</li>
<li>
<p>A value object will never hit the database to lazy load more data.
(so that the client code can more easily reason about performance. Only db.something() calls will hit the database)</p>
</li>
<li>
<p>A method is quite tightly coupled to the client. While a method may be used by more then one client is has a very tightly defined implementation and re-use is not expected to be the rule.
(So that removing some client code will also clearly remove their constraints on the data model)</p>
</li>
<li>
<p>of course, internally methods may re-use each other freely (so that we do not have code duplication)</p>
</li>
<li>
<p>A mutation is a separate method adhering to the same practices as a retrieval method.
(a second requirement to make only db.something() calls hit the database)</p>
</li>
<li>
<p>You might have a mutation method that also retrieves data, but this is not the norm.
(explicitly mentioned for people who expect full Command Query Separation)</p>
</li>
<li>
<p>The DataStoreOperations methods will only get or mutate state.
Triggering or calculating state (such as UUID&#8217;s or changeLog information) is done by the TimbuctooActions.</p>
</li>
<li>
<p>You may add a custom DataStoreOperations implementation.</p>
</li>
<li>
<p><span class="feature">We might add code to TimbuctooActions that runs several DataStoreOperation implementations in parallel and reports their performance so we can do experiments on that</span></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_known_issues">Known issues</h4>
<div class="ulist">
<ul>
<li>
<p>TinkerPopOperations.replaceRelation</p>
</li>
<li>
<p>throws a NotFoundException instead of an AlreadyUpdatedException when the rev of the relation client is not the latest</p>
</li>
<li>
<p>throw a distinct Exception when the client tries to save a relation with different source, target or type.
Currently these properties are simply ignored.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dataflow">Dataflow</h4>
<div class="paragraph">
<p>The picture below describes the data flow of the update or the retrieval of an entity.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-b162f6094d662c16298209fd6e49a4c8.png" alt="diag b162f6094d662c16298209fd6e49a4c8" width="1710" height="392">
</div>
</div>
<div class="sect4">
<h5 id="_client_api">Client API</h5>
<div class="paragraph">
<p>The client API is our REST API. This where the client request arrive
==== SingleEntity
'SingleEntity' is the REST endpoint that is used for updating an retrieving entities.
==== JsonCrudService
'JsonCrudService' translates the Json input of the REST endpoints to Entity (a data transfer object).</p>
</div>
</div>
<div class="sect4">
<h5 id="_domain">Domain</h5>
<div class="paragraph">
<p>Domain contains all the actions that are specific for Timbuctoo.
==== TimbuctooActions
'TimbuctooActions' is the interface for interacting with the database from the client.
This class manages the Timbuctoo specific information, for example the way the id&#8217;s look.
==== DataStoreOperations
'DataStoreOperations' is an interface that contains all the methods needed by 'TimbuctooActions'.
To support a new database this class should be implemented.</p>
</div>
</div>
<div class="sect4">
<h5 id="_database">Database</h5>
<div class="paragraph">
<p>'TinkerPopOperations' is our implementation of DataStoreOperations.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_data_model">Data model</h4>
<div class="sect4">
<h5 id="_entity">Entity</h5>
<div class="paragraph">
<p>Contains the information of the Entity saved in the database.
For example a person or a document.
Each Entity has properties.
Most Entities have relations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public interface Entity {
  List&lt;TimProperty&gt; getProperties();

  List&lt;RelationRef&gt; getRelations();
  //...
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_timproperty">TimProperty</h5>
<div class="paragraph">
<p>Contains the information of the property of an Entity.
The TimProperty interface has implementations for all property types used in Timbuctoo.
A TimProperty can be a wrapper around a Java type like String, int, boolean or a Timbuctoo custom type like PersonNamesValue and Datable.
This way we can provide an implementation (e.g a <a href="./tinkerpop/conversion/TinkerPopPropertyConverter.java">TinkerPopPropertyConverter</a> implementation, a jersey serializer, or a js client of the API) with a finite list of types that they should be able to handle.</p>
</div>
<div class="sect5">
<h6 id="_example">Example</h6>
<div class="paragraph">
<p>If this is the interface</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public abstract class TimProperty {
  private final String name;
  private final Value value;

  public TimProperty(String name, Value value){
     this.name = name;
     this.value = value;
   }

   public abstract &lt;Type&gt; Tuple&lt;String, Type&gt; convert(PropertyConverter&lt;Type&gt; propertyConverter) throws IOException;

   public String getName() {
     return name;
   }

   public Value getValue() {
     return value;
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then we can implement it for two property types like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class PersonNamesProperty extends TimProperty&lt;PersonNames&gt; {
  public PersonNamesProperty(String name, PersonNames value) {
    super(name, value);
  }

  @Override
  public &lt;Type&gt; Tuple&lt;String, Type&gt; convert(PropertyConverter&lt;Type&gt; propertyConverter) throws IOException {
    return propertyConverter.to(this);
  }
}

public class StringProperty extends TimProperty&lt;String&gt; {
  public StringProperty(String name, String value) {
    super(name, value);
  }

  @Override
  public &lt;Type&gt; Tuple&lt;String, Type&gt; convert(PropertyConverter&lt;Type&gt; propertyConverter) throws IOException {
    return propertyConverter.to(this);
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_propertyconverter">PropertyConverter</h5>
<div class="paragraph">
<p>A PropertyConverter converts a Timbuctoo specific type to an output type.
It will also convert an output type to a timbuctoo specific type (and thus function like a factory method).
The input of PropertyConverter#from is a the property&#8217;s name and it&#8217;s value, so you can choose which converter to use based on the property name.
The from method is responsible for determining what the input value contains and picking the right TimProperty implementation to return.</p>
</div>
<div class="paragraph">
<p>The to methods all return the same result type because we don&#8217;t think adding a type parameter for each result value is needed.
They return a Tuple of String, Type where the left contains the propertyName as defined by the converter.
This allows a converter to change the name as well.
This is currently needed for our database (which prefixes all properties with the collection and dataset name)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public abstract class PropertyConverter&lt;Type&gt;{
  public TimProperty from(String name, Type value){
    //...
  }

  protected abstract PersonNamesProperty createPersonNamesProperty(String name, Type value);

  protected abstract StringProperty createStringProperty(String name, Type value);

  protected abstract Tuple&lt;String, Type&gt; to(PersonNamesProperty property);

  protected abstract Tuple&lt;String, Type&gt; to(StringProperty property);
}</code></pre>
</div>
</div>
<div class="sect5">
<h6 id="_example_2">Example</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class JsonPropertyConverter implements TimPropertyConverter&lt;JsonNode&gt; {
  public TinkerPopPropertyConverter(Collection collection) {
    //store the collection for later use in deciding what property type
  }

  protected PersonNamesProperty createPersonNamesProperty(String name, JsonNode value) {
    //...
  }

  protected StringProperty createStringProperty(String name, JsonNode value) {
    //...
  }

  protected Tuple&lt;String, JsonNode&gt; to(PersonNamesProperty property){
    //...
  }

  protected Tuple&lt;String, JsonNode&gt; to(StringProperty property){
    //...
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class TinkerPopPropertyConverter implements TimPropertyConverter&lt;Object&gt; {
  public TinkerPopPropertyConverter(Collection collection) {

  }

  protected PersonNamesProperty createPersonNamesProperty(String name, Object value) {
    //...
  }

  protected StringProperty createStringProperty(String name, Object value) {
    //...
  }

  protected Tuple&lt;String, Object&gt; to(PersonNamesProperty property){
    //...
  }

  protected Tuple&lt;String, Object&gt; to(StringProperty propertyName){
    //...
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_relationref">RelationRef</h5>
<div class="paragraph">
<p>Represents a reference of another Entity.
It contains information like the name of the relation and the display name of the other Entity.
An Entity does not contain teh related entities.
Only these RelationRefs.</p>
</div>
</div>
<div class="sect4">
<h5 id="_entityrelation">EntityRelation</h5>
<div class="paragraph">
<p>Is a way to represent a relation between two Entities.
This representation is used when a relation is saved in the database.</p>
</div>
</div>
<div class="sect4">
<h5 id="_transactionfilter">TransactionFilter</h5>
<div class="paragraph">
<p>closes transactions at the end of a request.</p>
</div>
<div class="paragraph">
<p>This is a stopgap method that should prevent the problems that will be really fixed by the DataAccess class.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Dropwizard re-uses threads between requests.</p>
</li>
<li>
<p>neo4j needs a transaction for read actions</p>
</li>
<li>
<p>tinkerpop automatically creates a thread local transaction when
needed. (also for read actions)</p>
</li>
<li>
<p>we did not know so we don&#8217;t close read transactions at the end of
a read action</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Together this results in a thread that will not see the changes of
another thread. If it had a transaction open since before the other
thread had a transaction open.</p>
</div>
<div class="paragraph">
<p>I do not completely understand it though, because an open transaction
should be able to see committed data from another transaction (and I
have verified that the data was indeed committed). However this filter
does fix the bug.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_crud">CRUD</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
We will probably release a new REST API for the crud service, while also maintaining the current API. The current API is sometimes a bit cumbersome to develop against.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_summary">Summary</h4>
<div class="paragraph">
<p>The crud service offers an interpreted view of the RDF data. It might for example fold a list expressed as blank nodes in RDF into the the entity that references them.
Provenance information is included as part of the entity it belongs to.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><span class="bug">Only the person who changed the entity last and the time at which the change was made is provided at the moment, the exact nature of the change is recorded as well but not displayed yet.</span></p>
</li>
<li>
<p><span class="feature">No provenance over multiple entities or of automated transformations can be recorded at this moment.</span></p>
</li>
<li>
<p><span class="feature">The interpretation is currently hard-coded, but we have plans to allow the user to specify an interpretation with the dataset as metadata.</span></p>
</li>
<li>
<p><span class="feature">The entities returned by the service are currently only provided in a custom JSON format, but we are planning to also provide them as JSON-ld, graphml and n-triples</span></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_context_2">Context</h4>
<div class="paragraph">
<p>Timbuctoo offers a REST interface to edit data within different datasets.
This API precedes the RDF data model and even the graph database underpinnings.
Recently we have performed a clean re-implementation of the crud API based on the graph database to clear out many intermediate layers that are no longer needed.</p>
</div>
<div class="paragraph">
<p>This package contains code that translates a timbuctoo specific JSON format into changes on the Tinkerpop graph.</p>
</div>
</div>
<div class="sect3">
<h4 id="_responsibilies">Responsibilies</h4>
<div class="paragraph">
<p>This package is responsible for</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Parsing various formats (currently excel only)</p>
</li>
<li>
<p>generating "collections" (i.e. tables, sheets, files) containing "rows" of "fields"</p>
</li>
<li>
<p>handling imports of arbitrary size (only limited by the space limitations of the target database)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is currently not responsible for</p>
</div>
<div class="ulist">
<ul>
<li>
<p>converting the data to a specific data type (it should output plain text)</p>
</li>
<li>
<p>handling links (i.e. foreign keys or edges)</p>
</li>
<li>
<p>handling data that cannot be expressed as collections of rows</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After an import is finished all traces of the original format should be gone.</p>
</div>
</div>
<div class="sect3">
<h4 id="_data_model_2">Data model</h4>
<div class="paragraph">
<p>The timbuctoo database is divided into datasets.
Each Virtual Research Environment used to have it&#8217;s own dataset and each dataset would be solely for a specific VRE.
Therefore a dataset is itself called a VRE.
A VRE has <strong>collections</strong>.
Within a collection there are <strong>entities</strong>.
Each entity belongs to one and only one collection.
The collection that an entity belongs to is also refered to as it&#8217;s <strong>type</strong>.
When we say <strong>type</strong> we are also using the singular version of the collection name, when we say <strong>collection</strong> we always uses the plural form.
However, pluralisation is only done by appending an 's' (So a collection of people would have <strong>people</strong> as type and <strong>peoples</strong> as collection name).</p>
</div>
<div class="paragraph">
<p>Instead of using something like OWL same-as relations timbuctoo handled the open information model by letting the reader specify along which VRE an entity should be viewed.
When viewing along one VRE the properties from that VRE were shown, requesting the same entity (same identifier) using a different VRE would show different properties.
The same identifier would refer to the same vertex, properties were namespaced by their type name.
Types are namespaced by the VRE name, making properties also namespaced by their VRE name.</p>
</div>
<div class="paragraph">
<p>VRE configuration has only recently been moved to the database, it used to be embedded in Java code.</p>
</div>
<div class="paragraph">
<p>Outside of the normal VRE&#8217;s there is a VRE called Admin.</p>
</div>
<div class="paragraph">
<p>There is also a VRE called Base.</p>
</div>
<div class="paragraph">
<p>The current data model is based on the lowest common denominator of the data abstraction layer (tinkerpop2) and the database (neo4j). This means that there are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Vertices (what neo4 calls nodes)</p>
</li>
<li>
<p>Properties</p>
</li>
<li>
<p>Edges (a relation between two vertices)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Vertices represent a version of an entity. Properties represent the values of that entity that do not warrant their own identifier. Edges represent the relations between vertices and might have properties of their own (though this happens rarely)</p>
</div>
<div class="sect4">
<h5 id="_versioning">Versioning</h5>
<div class="paragraph">
<p><span class="image"><img src="versioning.png" alt="versioning"></span></p>
</div>
<div class="paragraph">
<p>(A, B, C &amp; D) The light blue square represents a vertex and thus one version of the entity. In A and B there is only 1 versie of Maria and Pieter, in C there are 2 versions of Maria and 1 of Pieter and in D there are 2 versies of both Maria and Pieter. The set of vertices with the same value for the property tim_id form a singly linked list through edges of the type isVersionOf. These are grouped in a darker blue square and labeled “version series”</p>
</div>
<div class="paragraph">
<p>(B) When an edge is created between two vertices, no new version is created. Both the vertex and the relations have a created_at property so that one can identify that there was a time when the vertices did exist, but the relation did not.</p>
</div>
<div class="paragraph">
<p>(C &amp; D) When a property is changed a new version <em>is</em> created. The relations to the old vertex are deleted and new relations are created using the new vertex. These new relations keep their created_at date, so it is possible to find all the vertices that existed while the old vertex was active by following the isVersionOf relation up to the latest version and iterating over its relations.</p>
</div>
<div class="paragraph">
<p>(Not in the drawing) When a property of a relation is modified a new relation is created and the old one marked as obsolete. similar to vertices.</p>
</div>
<div class="paragraph">
<p>(not in th drawing) The drawing slightly misrepresents the actual workings of the data persistence code in order to make it easier to understand. In reality the duplication of the object does not happen right before a modification, but directly after a “persistent id” has been received from the handle server. The race conditions that this might introduce are prevented by disallowing writes depending on whether a persistent id is available or not. (There are three states possible: the property is non-existent, the property exists but has the value NULL and the property exists)
Variants</p>
</div>
<div class="paragraph">
<p>The current timbuctoo also code to achieve most of the goals of anansi. These goals are implemented by storing all the data of the different research projects on a certain entity in the same vertex using namespaces for the properties.
There is also 1 namespace that contains the “abstract” data that does have meaning within the domain, such as a persons name. De facto this is the data of the first research environment that entered a value for that property. This abstract-level data is currently unused.
There is also data that is not domain related, such as the isLatest property. This is again placed in its own namespace.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_contents_of_this_package">Contents of this package</h4>
<div class="ulist">
<ul>
<li>
<p><a href="TinkerpopJsonCrudService.java">TinkerpopJsonCrudService</a> is the entry point. It contains methods for creating, reading, updating and deleting entities and will modify the database according to the above schedule.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tabular_data_importer">Tabular data importer</h3>
<div class="sect3">
<h4 id="_summary_2">Summary</h4>
<div class="paragraph">
<p>This package allows you to upload something that is tabular-like and have it converted to a basic RDF representation (just records pointing to the next record).
<span class="bug">The data entered like this is not yet part of the changelog, but should be.</span></p>
</div>
</div>
<div class="sect3">
<h4 id="_context_3">Context</h4>
<div class="paragraph">
<p>Timbuctoo should allow users to upload datasets.
We find that most of our users produce datasets in a tabular format (as opposed to a tree format or a graph format).
This package contains an code to parse streams of tabular data and to generate vertices to represent that data.</p>
</div>
<div class="paragraph">
<p>Originally this package also contained code to generate edges between the created vertices.
This has been removed and replaced with an RML implementation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_responsibilies_2">Responsibilies</h4>
<div class="paragraph">
<p>This package is responsible for
 * Parsing various formats (currently excel only)
 * generating "collections" (i.e. tables, sheets, files) containing "rows" of "fields"
 * handling imports of arbitrary size (only limited by the space limitations of the target database)</p>
</div>
<div class="paragraph">
<p>It is currently not responsible for
 * converting the data to a specific data type (it should output plain text)
 * handling links (i.e. foreign keys or edges)
 * handling data that cannot be expressed as collections of rows</p>
</div>
<div class="paragraph">
<p>After an import is finished all traces of the original format should be gone.</p>
</div>
</div>
<div class="sect3">
<h4 id="_data_model_3">Data model</h4>
<div class="paragraph">
<p>Given a dataset called <code>movie information</code> containing a table called <code>actors</code> with the following data:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">first name</th>
<th class="tableblock halign-left valign-top">rating</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">42</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Saoirse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">44</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>you&#8217;d get the following graph</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-645b5f36cadf162d96a1dcc52e602b58.png" alt="diag 645b5f36cadf162d96a1dcc52e602b58" width="1210" height="434">
</div>
</div>
<div class="paragraph">
<p>Note the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the _value postfix is needed because we will also store mapping errors next to these values. e.g. if a value is interpreted as foreign key, but it&#8217;s target is not available then an error will be stored on the raw entity vertex under <code>&lt;property&gt;_error</code></p>
</li>
<li>
<p>the property descriptions are stored mostly to be able to traverse them in order.</p>
</li>
<li>
<p>Together with the ordered traversal of the items (<code>hasNextItem</code>) this allows us to rerender the table as it was uploaded.</p>
</li>
<li>
<p>All properties are stored as text, regardless of the datatypes that the source format supports.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_contents_of_this_package_2">Contents of this package</h4>
<div class="ulist">
<ul>
<li>
<p><a href="./BulkUploadService.java">BulkUploadService</a> is the entry point. It performs the actual upload an links everything together.</p>
</li>
<li>
<p><a href="./loaders">loaders</a> contains two variants of an Excel loader at the moment. To add a new loader you&#8217;d add an implementation of <a href="loaders/BulkLoader.java">BulkLoader</a> here.</p>
</li>
<li>
<p><a href="loaders/excel/allsheetloader/AllSheetLoader.java">AllSheetLoader</a> loads all columns of all sheets. <strong>This is the one that timbuctoo currently uses</strong>.</p>
</li>
<li>
<p><a href="loaders/excel/styleawarexlsxloader/StyleAwareXlsxLoader.java">StyleAwareXlsxLoader</a> loads only the columns that are marked with a specially named style. <strong>This is not used at the moment.</strong></p>
</li>
<li>
<p><a href="parsingstatemachine">parsing state machine</a> contains the actual import logic.</p>
</li>
<li>
<p><a href="savers">savers</a> contains only a Tinkerpop saver at the moment.
To load data in a different database you&#8217;d add your own implementation of <a href="savers/Saver.java">Saver</a> here.
To change how the data is stored in the graph you&#8217;d change the code in <a href="savers/TinkerpopSaver.java">TinkerpopSaver</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_list_of_known_bugs_issues">List of known bugs / issues</h4>
<div class="paragraph">
<p>Some issues are described from user perspective, from the <a href="https://github.com/HuygensING/timbuctoo-default-frontend">excel mapping frontend</a>
The problem analyses and suggested solutions, however, are written from a backend implementation perspective.</p>
</div>
<div class="sect4">
<h5 id="_self_referencing_entity">Self referencing entity</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When I map a new relation for data sheet, and I use the same column as the source column and the target column,
I get no errors and I see in the edit interface two relations on the same entity, pointing to the same entity.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Solution: RML mapper should add an error: "child and parent column are the same in join condition".</p>
</div>
</div>
<div class="sect4">
<h5 id="_mapping_of_data_types">Mapping of data types</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Basic type inheritance of archetype: When I map (for instance) a column to a datable field, the field is not mapped as a datable, but as text.</p>
</li>
<li>
<p>Mapping to types of limited values: When I map (for instance) a column to the 'gender' field, the field is mapped as text and may have any value I want.</p>
</li>
<li>
<p>Mapping to lists: I can only map one column to a list. The field is mapped as text and I cannot add new values to this property after the import.</p>
</li>
<li>
<p>The links data type is not supported yet.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>There are multiple interconnected issues here, so no clear solution presents itself:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>One part of the solution must be to start using rdf types for dates and numbers</p>
</li>
<li>
<p>Another might be to make a list of 'known' predicates, which makes the rdf importer treat values correctly (i.e. with lists)</p>
</li>
<li>
<p>One can also imagine the rml mapping frontend generating triples describing the types of certain predicates (i.e. &lt;documentType&gt; &lt;isA&gt; &lt;Admin/documents/list-of-strings-of-limited-values&gt;)&#8201;&#8212;&#8201;which would mean that property configurations need to be interpreted more by the rdf importer</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_no_validation_of_the_relationtype_takes_place">No validation of the relationType takes place</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No validation of the relationType takes place: I can easily create a relation like this:</p>
</li>
</ol>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>&lt;some person&gt; &lt;hasBirthPlace&gt; &lt;some other person&gt;</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Solution suggestions:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>We need to discuss how to fix this. When reusing a relationType, the source and target entity type should match the Timbuctoo requirements, or should the requirements be dropped? Or something inbetween.
1a. Relationtype configurations should be part of a vre (dataset); they may inherit from an archetypal form, but they should not have to.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_uncertainties_about_rdfuri_lucene_index">Uncertainties about rdfUri lucene index</h5>
<div class="paragraph">
<p>We have not verified yet whether lucene index entries are thrown away, when the vertices they refer to are deleted. I have seen no indications that this potential problem actually occurs, but this could cause serious sync issues.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rml_implementation">RML implementation</h3>
<div class="paragraph">
<p>Once you have uploaded some data in a tabular representation you can call the RML processor with an RML document to generate RDF which is then inserted into the database.
The processor calls the RDF importer in the background with the generated triples.</p>
</div>
<div class="paragraph">
<p>The code in this package to implements the <a href="http://rml.io">rml specification</a>.
It does not implement any of the datasources itself, but allows you to provide your own implementations.</p>
</div>
<div class="sect3">
<h4 id="_context_4">Context</h4>
<div class="paragraph">
<p>In timbuctoo we import data in tabular form as a "raw import" and then use a <a href="http://github.com/huygensING/timbuctoo-default-frontend">GUI</a> to generate an RML mapping that converts it into RDF.
We then import the RDF using our generic RDF importer.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>This allows us to import many different data formats.</p>
</li>
<li>
<p>It decouples the GUI from the importer which has allowed us to import data that the GUI does not support without having to make the GUI more complex (we can bypass it if needed).</p>
</li>
<li>
<p>It makes our mapping software usable for people who do not use the full timbuctoo stack (by generating basic RDF).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_usage">Usage</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  //First you should generate a Jena Model of the data somehow

  //Dependencies:
  //The thing that can construct an RmlMappingDocument from a jena model
  final rmlBuilder = new JenaBasedReader();

  //The thing that constructs dataSource instances as needed.
  //This factory should use the contents of the rdfResource to determine what dataSource to create
  Function&lt;RdfResource, Optional&lt;DataSource&gt;&gt; dataSourceFactory = rdfResource -&gt; Optional.of(new MyDataSource(rdfResource));

  //The thing that responds to errors that can occur in valid RML mappings, such as missing values.
  ErrorHandler errorHandler = new ErrorHandler() {
    @Override
    public void linkError(Map&lt;String, Object&gt; rowData, String childField, String parentCollection, String parentField) {
      throw new RuntimeException("Linking failed!");
    }
  };

  //create the mappingDocument instance
  final RmlMappingDocument rmlMappingDocument = rmlBuilder.fromRdf(model, dataSourceFactory);

  //You can see how it's interpreted using toString()

  if (rmlMappingDocument.getErrors().size() == 0) { //check for errors that make the RML mapping invalid
    //execute the mapping
    rmlMappingDocument.execute(errorHandler).forEach((triple) -&gt; {
      System.out.println(triple);
    });
  }</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Implementing a minimal DataSource with shipped JoinHandler</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"> class MyDataSource implements DataSource {
   // This wil handle references from one table to another
   private final JoinHandler joinHandler = new HashMapBasedJoinHandler();
   private final MyData myData;

   public MyDataSource(RdfResource rdfResource) {
     this.myData = new MyData(rdfResource); // somehow derive the correct data rows for this rdfResource
   }

   @Override
   public Iterator&lt;Row&gt; getRows(ErrorHandler errorHandler) {
     return myData
       .turnIntoStream()
       .map(values -&gt; {
         // values in Map should look like this:
         // { "columnName": "cellValue", ... }
         Map&lt;String, Object&gt; valueMap = transFormValuesOfThisDataRowToValueMap(values);

         // This will handle the reference from one data source to another
         joinHandler.resolveReferences(valueMap);

         return new Row(valueMap, errorHandler);
       })
       .iterator();
   }

   @Override
   public void willBeJoinedOn(String fieldName, Object referenceJoinValue, String uri, String outputFieldName) {
    // This will handle the reference from one data source to another
     joinHandler.willBeJoinedOn(fieldName, referenceJoinValue, uri, outputFieldName);
   }
 }</code></pre>
</div>
</div>
<div class="paragraph">
<p>More information on how a JoinHandler can be implemented is documented in the source of link: ./datasource/joinhandlers/HashMapBasedJoinHandler.java[HashMapBasedJoinHandler].</p>
</div>
</div>
<div class="sect3">
<h4 id="_code_layout">Code layout</h4>
<div class="paragraph">
<p>The package contains the following folders:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="./rmldata">/rmldata</a></dt>
<dd>
<p>Contains the java representation of the RML rdf classes.
The java classes form a tree rooted in RmlMappingDocument.
They usually have a method that generates data (i.e. <code>execute()</code> or <code>getItems()</code>) and a toString() method that recursively prints the tree.
You will normally only interact with the outermost RmlMappingDocument class which calls the other classes recursively.</p>
</dd>
<dt class="hdlist1"><a href="./rmldata/builders">/rmldata/builders</a></dt>
<dd>
<p>RML contains a bunch of shorthands and the builders contain the logic needed to interpret the RML in context so that the built instances no longer need this context.
For example: you can omit the termType in the source mapping document.
The <code>TermMapBuilder</code> will decide what the termType should be and the resulting <code>RrTermMap</code> will simply have a property TermType set to the correct value.</p>
</dd>
<dt class="hdlist1"><a href="./jena">/jena</a></dt>
<dt class="hdlist1"><a href="./rdfshim">/rdfshim</a></dt>
<dd>
<p>The library depends on jena at this moment, but we&#8217;ve invested some effort to make this a minimal dependency.
It should be possible to extract the jena package to a separate package that depends on this library while the library is jena agnostic.</p>
</dd>
<dt class="hdlist1"><a href="./datasource">/datasource</a></dt>
<dd>
<p>The library ships with a JoinHandler interface which can be used by the datasource to handle joins and one sample implementation backed by a HashMap.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_implementation_details">Implementation details</h4>
<div class="sect4">
<h5 id="_handling_of_circular_and_self_referencing_data_sources_let_s_call_them_tables">Handling of circular and self-referencing data sources (let&#8217;s call them tables)</h5>
<div class="paragraph">
<p>In order for this library to support big datasets without the leverage of querying on-the-fly (which SQL based databases provide), data rows are expected to be streamed per logical source (i.e. RdfResource).</p>
</div>
<div class="paragraph">
<p>This however introduces the problem of handling tables which refer to each other (possibly with cyclic dependency) as explained in the next sub-sections.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">References without a cycle</dt>
<dd>
<p>When exactly one table references exactly one other table this is simply resolved by first mapping the rows of the table that is referred to and then the table that refers to it.
Given these tables:</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-bec9e42fdc5751a10c0733b9620fee40.png" alt="diag bec9e42fdc5751a10c0733b9620fee40" width="660" height="154">
</div>
</div>
<div class="paragraph">
<p>And this original order of mappers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>[
  mapperForPersons,
  mapperForLocations
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sort the mappers so that URI&#8217;s for Locations are generated <strong>before</strong> the mappings of persons are performed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>[
  mapperForLocations, --&gt; will generate URI's and store them using JoinHandler implementation
  mapperForPersons    --&gt; will look up URI's for the locations using store in JoinHandler implementation
]</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Self reference</dt>
<dd>
<p>The solution above does not solve the issue of a table in which one column references another column in the same table.
In this case a new mapper is generated (split off) from the original mapper, so that two passes are made through the same datasource.
The first pass maps all the values that are not a reference.
The second pass maps all the values that are a reference to another column.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Given this table:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-24c0f06916b02306931d373f5b1c1b39.png" alt="diag 24c0f06916b02306931d373f5b1c1b39" width="270" height="182">
</div>
</div>
<div class="paragraph">
<p>And this mapper list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>[
  mapperForPersons
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Split off one extra mapper to resolve the URI of person being referenced to by mother_id:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>[
  mapperForPersons,  --&gt; will generate URI's and store them using JoinHandler implementation
  mapperForPersons'  --&gt; will look up URI's for the mothers using store in JoinHandler implementation
]</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Cyclic references</dt>
<dd>
<p>In cases where table A references table B and table B references table A there is a circular dependency as well.
The same solutions as above apply here: first sort by dependency, then split off any unresolved dependencies.
This also works for more complex cases with multiple cycles.
The full implementation of sort and split is here: <a href="./rmldata/builders/MappingDocumentBuilder.java">/rml/rmldata/builders/MappingDocumentBuilder.java</a>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Given this data structure:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-01891fb443507cadb2ac0b38fe8796e9.png" alt="diag 01891fb443507cadb2ac0b38fe8796e9" width="780" height="238">
</div>
</div>
<div class="paragraph">
<p>And this original order of mappers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>[
 zMapper, &lt;--- depends on xMapper
 xMapper, &lt;--- depends on yMapper
 yMapper, &lt;--- depends on zMapper, aMapper and yMapper (self)
 aMapper  &lt;--- depends on no mapper
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sort and split the mappers like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>[
  aMapper,   &lt;--- has no dependencies on other mappers having been run
  yMapper,   &lt;--- depends on aMapper
  xMapper,   &lt;--- depends on yMapper
  zMapper,   &lt;--- depends on xMapper
  yMapper'   &lt;--- depends on yMapper and on zMapper (only one mapper needed to be split off to break 2 cycles.
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_error_reporting">Error reporting</h5>
<div class="paragraph">
<p>R2RML (and thus RML) specifies that data errors should be reported to the client.
We implement this by writing errors back to the datasource, allowing the application to present the user with the data rows that triggered invalid input according to his or her specification.
For our own datasource the results will be written to neo4j as follows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-e4f660a5f932189c42bf6466a27f9733.png" alt="diag e4f660a5f932189c42bf6466a27f9733" width="413" height="686">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_known_issues_2">Known issues</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Mapping columns</dt>
<dd>
<p>You cannot transform a column in RML.
The R2RML languages gives you the ability to use an arbitrary SQL query as a datasource which allows for most of the conversions in SQL.
RML does not have this support.
This is especially annoying for implementing manytomany links and when you want to derive the name of the predicate.</p>
<div class="paragraph">
<p>We might implement an extension that allows for referencingMaps in subjectMaps and predicateMaps and an extension that allows you to transform the inputline to aleviate some of this pain.</p>
</div>
</dd>
<dt class="hdlist1">Join handling is done by the wrong datasource</dt>
<dd>
<p>The index for joining is stored by the datasource that will use the join values.
This is perhaps a bit confusing.
I can imagine that intuitively the datasource that provides the data also stores the index (technicaly there&#8217;s no clear preference).</p>
</dd>
</dl>
</div>
<div class="sect4">
<h5 id="_upload_and_mapping_states">Upload and mapping states</h5>
<div class="imageblock">
<div class="content">
<img src="diag-a316ef34b1ee3953443f2a575bf30bf2.png" alt="diag a316ef34b1ee3953443f2a575bf30bf2" width="700" height="518">
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rdf_import">RDF import</h3>
<div class="sect3">
<h4 id="_summary_3">Summary</h4>
<div class="paragraph">
<p>The RDF importer can be provided with a dataset in n-triples format that will then be inserted as-is into the database.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><span class="feature">An extra piece of provenance should be generated, listing the person who uploaded the file and the name or url of the file (if available to the server).</span></p>
</li>
<li>
<p><span class="feature">The endpoint should be able to download datasets from the internet directly.</span></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_context_5">Context</h4>
<div class="paragraph">
<p>RDF is a widely used linked data format.
Therefore Timbuctoo has to communicate with a with services through the RDF data format.
This package contains a mapping to convert RDF to the Timbuctoo native property graph format.
The RDF syntax we support are n-quads. Because n-quads are a superset of n-triples we support that format as well.</p>
</div>
<div class="paragraph">
<p>The code for the RDF import can be found in the package [nl.knaw.huygens.timbuctoo.rdf](<a href="https://github.com/HuygensING/timbuctoo/tree/master/timbuctoo-instancev4/src/main/java/nl/knaw/huygens/timbuctoo/rdf" class="bare">github.com/HuygensING/timbuctoo/tree/master/timbuctoo-instancev4/src/main/java/nl/knaw/huygens/timbuctoo/rdf</a>)</p>
</div>
</div>
<div class="sect3">
<h4 id="_import">Import</h4>
<div class="paragraph">
<p>There are two options to import data.
The first one is can be found at <a href="http://localhost:8080/static/bulk-upload/" class="bare">localhost:8080/static/bulk-upload/</a>.
This way you can upload a file with n-quads and n-triples.
If you want to call the endpoint directly, use <a href="http://localhost:8080/v2.1/rdf/import" class="bare">localhost:8080/v2.1/rdf/import</a> with the Content-Type 'multipart/form-data'.
The form needs a 'VRE_ID'-field and a 'file'-field that contains a file with the triples to upload.</p>
</div>
<div class="paragraph">
<p>The other possibility is that you POST several lines of n-quads of n-triples to the resource <a href="http://localhost:8080/v2.1/rdf/import" class="bare">localhost:8080/v2.1/rdf/import</a>.
This requires the headers 'VRE_ID' and 'Content-Type' to be set.
The 'VRE_ID' can be set to a name of VRE that does not exist yet.
The Content-Type must be 'application/n-quads'.
The body should contain the triples, with one line for each triple.</p>
</div>
<div class="paragraph">
<p>If you have a large amount of data or a file containing your triples you want to use the first option.
If you just want to try to import a few triples the second option would be an easier choice.</p>
</div>
<div class="paragraph">
<p>Both imports will create a VRE with the name provided by the header VRE_ID or filled in in the field of the for of the bulk-upload. (Wat gebeurd er met de graph URI van de quad?)
After the import has completed you can find your data in the [Edit GUI](<a href="http://localhost:8080/static/edit-gui/" class="bare">localhost:8080/static/edit-gui/</a>) under the dropdown of the VRE you chose the importer to create.</p>
</div>
<div class="sect4">
<h5 id="_process">Process</h5>
<div class="paragraph">
<p>When the data is uploaded, it is processed by the RdfImporter.
The RdfImport prepares the import, by creating a new VRE. Then it delegates the import of the triples to the TripleImporter.
The TripleImporter lets a TripleProcessor execute one of the [supported cases](#supported-cases).
These TripleProcessors add the data to the database.
They also add the necessary configuration to the database.
This configuration could be adding a new Collection to the database or adding a Property configuration to a Collection.</p>
</div>
<div class="sect5">
<h6 id="_supported_cases">Supported cases</h6>
<div class="paragraph">
<p>We support 4 types of triples.
These 4 types seem to are enough to support most of the rdf language.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Triples that describe a <a href="http://www.w3.org/2000/01/rdf-schema#subClassOf" class="bare">www.w3.org/2000/01/rdf-schema#subClassOf</a> with a for Timbuctoo known archetype.
When the object contains no known archetype this subClassOf relation will be treated like every other relation.</p>
</li>
<li>
<p>Triples that describe <a href="http://www.w3.org/2000/01/rdf-schema#type" class="bare">www.w3.org/2000/01/rdf-schema#type</a>.</p>
</li>
<li>
<p>Triples where the object is a literal.</p>
</li>
<li>
<p>Triples where the object is another resource. This includes subClassOf with a type that is not known as archetype in Timbuctoo.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Each of the cases has its own TripleProcessor in the [triple processor package](<a href="https://github.com/HuygensING/timbuctoo/tree/master/timbuctoo-instancev4/src/main/java/nl/knaw/huygens/timbuctoo/rdf/tripleprocessor" class="bare">github.com/HuygensING/timbuctoo/tree/master/timbuctoo-instancev4/src/main/java/nl/knaw/huygens/timbuctoo/rdf/tripleprocessor</a>).</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_hierarchy">Hierarchy</h5>
<div class="paragraph">
<p>An import can result in a combination of the next 3 scenario&#8217;s.</p>
</div>
<div class="sect5">
<h6 id="_no_type_information_available">No type information available</h6>
<div class="paragraph">
<p>This is the most basic one. For example when the first triple of the VRE has not <a href="http://www.w3.org/2000/01/rdf-schema#type" class="bare">www.w3.org/2000/01/rdf-schema#type</a> predicate, the newly created vertex will be added to the 'unknown'-collection of the VRE.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-53340e10e5313082524a19aec83888e2.png" alt="diag 53340e10e5313082524a19aec83888e2" width="351" height="551">
</div>
</div>
</div>
<div class="sect5">
<h6 id="_a_type_without_a_connection_with_a_known_archetype">A type without a connection with a known archetype</h6>
<div class="paragraph">
<p>When type information becomes available, the structure will be transformed to the next structure.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-95d59af043a4f5827033670d15d89e26.png" alt="diag 95d59af043a4f5827033670d15d89e26" width="340" height="551">
</div>
</div>
</div>
<div class="sect5">
<h6 id="_a_type_with_a_known_archetype">A type with a known archetype</h6>
<div class="paragraph">
<p>When the type is <a href="http://www.w3.org/2000/01/rdf-schema#subClassOf" class="bare">www.w3.org/2000/01/rdf-schema#subClassOf</a> of a Timbuctoo known archetype.
The structure will be transformed to the following structure.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-3fa91aaf64201fc51d09d3eee4e4492a.png" alt="diag 3fa91aaf64201fc51d09d3eee4e4492a" width="328" height="551">
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dependencies">Dependencies</h4>
<div class="paragraph">
<p>We use [Apache Jena](<a href="https://jena.apache.org/" class="bare">jena.apache.org/</a>) to convert the triple strings to java objects.</p>
</div>
</div>
<div class="sect3">
<h4 id="_known_issues_3">Known issues</h4>
<div class="paragraph">
<p>Timbuctoo supports edges with inverse names for inverse directions in a data structure called RelationType.
Currently mapping via URI of an rdf predicate only works for the regular name of a relation type.</p>
</div>
<div class="paragraph">
<p>For instance, given these triples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>&lt;amsterdam&gt; &lt;isDeathPlaceOf&gt; &lt;piet&gt; .
&lt;jan&gt; &lt;hasBirthPlace&gt; &lt;Amsterdam&gt; .</code></pre>
</div>
</div>
<div class="paragraph">
<p>And a RelationType definition as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
  ...,
  "regularName": "hasDeathPlace",
  "inverName": "isDeathPlaceOf",
  "sourceType: "person",
  "targetType: "location"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We currently get these resulting edges:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>v[73] --[isDeathPlaceOf]--&gt; v[72]
v[65] --[hasBirthPlace]--&gt; v[73]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where isDeathPlaceOf is a newly generated relationType, in stead of one mapped against the existing relationType.</p>
</div>
<div class="paragraph">
<p>The expected result would have been:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>v[72]--[hasDeathPlace]--&gt;v[73]
v[65] --[hasBirthPlace]--&gt; v[73]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Culprit code only looks at RDF_URI_PROP identifying a regular name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>rdf.Database.java[r215]:  graphWrapper.getGraph().traversal().V().hasLabel("relationtype").has(RDF_URI_PROP, predicate.getURI());</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resource_sync">Resource sync</h3>
<div class="sect3">
<h4 id="_summary_4">Summary</h4>
<div class="paragraph">
<p>Timbuctoo can discover and download datasets from remote servers that contain resourcesync descriptions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_context_6">Context</h4>
<div class="paragraph">
<p>The ResourceSync Framework is used to exchange rdf-data with remote quad stores.
Features in this package include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>nl.knaw.huygens.timbuctoo.remote.rs.xml - marshal and unmarshal sitemap documents to and from java classes</p>
</li>
<li>
<p>nl.knaw.huygens.timbuctoo.remote.rs.discover - discover and navigate a remote ResourceSync document tree</p>
</li>
<li>
<p>nl.knaw.huygens.timbuctoo.remote.rs.view - render the result of an expedition for json.</p>
</li>
<li>
<p>nl/knaw/huygens/timbuctoo/remote/rs/ResourceSyncService.java - central service</p>
</li>
<li>
<p>nl/knaw/huygens/timbuctoo/server/endpoints/v2/remote/rs/Discover.java - web service API</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_data_model_4">Data model</h4>
<div class="paragraph">
<p>The <a href="http://www.openarchives.org/rs/1.0/resourcesync">resource sync specification</a> describes how various documents interlink in order to describe a set of resources and where the entrypoints should be placed.
In it&#8217;s simplest form it is just one file containing a directory listing with a predefined name.
This is needed because the HTTP spec itself does not define a "list" command.
Resourcesync is a set of embelishments on the sitemap.xml de-facto standard.
Timbuctoo uses resourcesync to discover datasets at a source and to get the list of files that comprise the dataset.</p>
</div>
<div class="paragraph">
<p>The document linked above provides the full spec, but we found it convenient to draw a picture of the various documents:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-947ea63f3271394749dc3b59ea3c8229.png" alt="diag 947ea63f3271394749dc3b59ea3c8229" width="930" height="560">
</div>
</div>
<div class="paragraph">
<p>The horizontal arrows indicate entrypoints.
If you provide timbuctoo (or another resourcesync destination) with a url it may try to find a link header/link tag, a resourcesync file in the folder .well-known at the root of the server, or a robots.txt.
Each file provides links downwards, optionally they might also provide a link upwards.
A source description contains links to one or more capability lists, each list is considered to contain 1 dataset by timbuctoo.
A capability list will link to one or more files via a resource (index) list.
All files in the resource list are considered to be part of the same dataset.
A capability list may also point to a resource dump and/or changesets, these features are currently not supported and will be ignored.</p>
</div>
<div class="paragraph">
<p>Walking up the resource chain is also not yet implemented.</p>
</div>
<div class="paragraph">
<p>So to create a resourcesync capable server for timbuctoo you should:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Put a <a href="http://www.openarchives.org/rs/1.0.9/resourcesync#ex_7">source description</a> at <code>/.well-known/resourcesync</code> on your server</p>
</li>
<li>
<p>Fill it with links to <a href="http://www.openarchives.org/rs/1.0.9/resourcesync#ex_6">capability lists</a> (1 per dataset that you wish to publish)</p>
</li>
<li>
<p>Fill them with links to <a href="http://www.openarchives.org/rs/1.0.9/resourcesync#ex_1">Resource lists</a></p>
</li>
<li>
<p>Fill those with links to the actual data files in one of the supported rdf formats (see below)</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="_valid_resources">Valid resources</h5>
<div class="paragraph">
<p>Timbuctoo cannot sync every filetype on the internet, only files containing rdf in several of the more well-known serialisation formats.
To indicate the serialisation format you can specify the mimetype in the optional <code>md</code> field (meta data field) for each url from the resource list.
Alternatively you can use a file extension to indicate the type of file.
The explicit mimetype overrules the file extension.</p>
</div>
<div class="paragraph">
<p>The filetypes that we can currently import are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>text/turtle (.ttl)</p>
</li>
<li>
<p>application/rdf+xml (.rdf)</p>
</li>
<li>
<p>application/n-triples (.nt)</p>
</li>
<li>
<p>application/ld+json (.jsonld)</p>
</li>
<li>
<p>text/trig (.trig)</p>
</li>
<li>
<p>application/n-quads (.nq)</p>
</li>
<li>
<p>application/trix+xml (.trix)</p>
</li>
<li>
<p>application/rdf+thrift (.trdf)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So we expect an item resource list will look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>...
&lt;url&gt;
    &lt;loc&gt;http://localhost/.well-known/resourcesync/dataset1/resource2.nq&lt;/loc&gt;
    &lt;rs:md type="application/n-quads"/&gt; &lt;!-- this line is optional, but can be used to override the extension --&gt;
&lt;/url&gt;
...</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_steps_to_test_the_api">Steps to test the API</h4>
<div class="paragraph">
<p>Got to the folder <code>{timbuctoo-root}/documentation/resourcesyncexample</code>.
Simply run <code>docker-compose up</code> and the service will start at localhost port 80 (default http port).
Open the uri <code><a href="http://localhost/.well-known/resourcesync" class="bare">localhost/.well-known/resourcesync</a></code> to list the resource sync files.</p>
</div>
</div>
<div class="sect3">
<h4 id="_contents_of_this_example_server">Contents of this example server</h4>
<div class="paragraph">
<p>According to the resource sync spec we placed the source description (<code>sourcedescription.xml</code>) in the <code>./well-known/resourcesync</code> folder.
This source description sums up the available.</p>
</div>
<div class="paragraph">
<p>Another option is <code>robots.txt</code> that points to the resource list of <code>dataset1</code>.</p>
</div>
<div class="paragraph">
<p>The third option is to use an html or a response with a link to the capability list of a data set.
And example of this is <code>html_with_link.html</code> in teh folder of <code>dataset2</code>.</p>
</div>
<div class="paragraph">
<p>For more information see: <a href="http://www.openarchives.org/rs/1.0/resourcesync#FrameworkOrg" class="bare">www.openarchives.org/rs/1.0/resourcesync#FrameworkOrg</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://localhost:8080/v2.1/remote/rs/discover/listgraphs/http%3A%2F%2Flocalhost" class="bare">localhost:8080/v2.1/remote/rs/discover/listgraphs/http%3A%2F%2Flocalhost</a>  - list the graph iri&#8217;s at the remote site</p>
</li>
<li>
<p><a href="http://localhost:8080/v2.1/remote/rs/discover/listsets/http%3A%2F%2Flocalhost" class="bare">localhost:8080/v2.1/remote/rs/discover/listsets/http%3A%2F%2Flocalhost</a>  - same as previous, agnostic to base64-convention</p>
</li>
<li>
<p><a href="http://localhost:8080/v2.1/remote/rs/discover/framework/http%3A%2F%2Flocalhost" class="bare">localhost:8080/v2.1/remote/rs/discover/framework/http%3A%2F%2Flocalhost</a>  - flat representation of the ResourceSync Framework documents</p>
</li>
<li>
<p><a href="http://localhost:8080/v2.1/remote/rs/discover/tree/http%3A%2F%2Flocalhost" class="bare">localhost:8080/v2.1/remote/rs/discover/tree/http%3A%2F%2Flocalhost</a>  - hierarchical representation of the ResourceSync Framework documents</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_working_with_the_remote_rs_xml_package">Working with the ../remote/rs/xml package</h4>
<div class="paragraph">
<p>When downloading a ResourceSync doument we do not always know whether we find a &lt;sitemapindex&gt; or a &lt;urlset&gt;. The two kinds of document are represented as java classes <code>Urlset</code> and <code>Sitemapindex</code>, both have a common superclass, <code>RsRoot</code>. The class <code>RsBuilder</code> in this package will take a variety of input types and produces an Optional of <code>RsRoot</code>. If the unmarshal operation succeeded then either one of the methods
<code>Optional&lt;Urlset&gt; getUrlset()</code> or <code>Optional&lt;Sitemapindex&gt; getSitemapindex()</code> will yield.</p>
</div>
<div class="paragraph">
<p>The RsBuilder class also has a convenience method for marshaling a <code>RsRoot</code> subclass to its xml-representation: <code>String toXml(RsRoot rsRoot, boolean formattedOutput)</code>. If needed this class could be extended to marshal to different types: <code>toXmlString</code>, <code>toXmlFile</code> etc.</p>
</div>
<div class="paragraph">
<p>To build a ResourceSync document from java, the JAXB-classes can be used and populated with values. However, extensive syntax checking is not done. To build valid ResourceSync documents you still need to consult the documentation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_working_with_the_remote_rs_discover_package">Working with the ../remote/rs/discover package</h4>
<div class="paragraph">
<p>The principle behind the <code>AbstractUriExplorer</code> and <code>Result&lt;?&gt;</code> classes is agnostic to the ResourceSync Framework. It presents the opportunity to explore any URI and relate it to some kind of response or the absence of it. In case of a response, the response can be converted through some kind of function to some java class, the 'content' of the <code>Result</code>. Also any errors while getting the response or during conversion will be stored in the <code>Result</code> instance. Not handling errors in this code is natural. The maturity of possible errors will have a cause that is on the remote end. Here we register errors only to report them to end users.</p>
</div>
<div class="paragraph">
<p>The above abstraction comes together in the <code>AbstractUriExplorer</code> method with the signature
<code>
&lt;T&gt; Result&lt;T&gt; execute(URI uri, Function_WithExceptions&lt;HttpResponse, T, ?&gt; func)
</code>
Furthermore, the principle that any document on the internet can have incoming links and outgoing links is expressed in the <code>Result</code> class with parents (for incoming links) and children (for outgoing links).</p>
</div>
<div class="paragraph">
<p>The ResourceSync documents on a remote site can be seen as a tree or network; all documents have relations of some type to other documents. With the help of the concrete classes <code>LinkExplorer</code> and <code>RsExplorer</code> such a network can be explored. The <code>Expedition</code> class uses these explorers to test four methods of discovering a remote network of ResourceSync documents. At the moment an Expedition discovers <em>all</em> ResourceSync documents at the remote site, which might be overkill in case we are looking for a particular document and the remote site has substantial amounts of related documents.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>@ToDo: Introduce a Navigator class that is handed through <code>Expedition.explore</code> methods up to the <code>RsExplorer</code> class and that, having been given a target, knows whether the exploration has to go up, down or sideways through parent and child links in order to reach the target document. The enum <code>Capability</code> in the xml package already knows about parent and child relations between the various document types and might be useful in this navigation attempt.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>All results come together in a <code>ResultIndex</code>, which is essentially a collection of mappings between URIs and <code>Result&lt;?&gt;`s. The `ResultIndexPivot</code> class is a wrapper around such a <code>ResultIndex</code> that facilitates data summarizations. Of course the <code>ResultIndex</code> itself can be used as a starting point to 'stream' summarizations without intermediate reduce operations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_working_with_the_remote_rs_view_package">Working with the ../remote/rs/view package</h4>
<div class="paragraph">
<p>This package has several 'views' on results and result details that are shaped for (one way) Json serialization. Classes that take a <code>ResultIndex</code> are marked with the word 'Base': <code>SetListBase</code>, <code>FrameworkBase</code>, <code>TreeBase</code>.  The constructors of these classes take the result detail they are supposed to render and an <code>Interpreter</code> which introduces some flexibility on how a detail is rendered. The <code>Interpreter</code> and <code>Interpreters</code> classes should be extended with whatever interpreters are needed for more sophisticated renderings. Of course in such a case also particular methods in  the views have to be adopted to make use of the interpreter.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_discover_api">The Discover API</h4>
<div class="paragraph">
<p>The class <code>nl.knaw.huygens.timbuctoo.server.endpoints.v2.remote.rs.Discover</code> handles API calls that enable discovering a remote ResourceSync source. A CLARIAH-introduced convention of communicating the graph iri through the name of a directory is provided by means of an interpreter as mentioned in the previous paragraph. The methods <code>listSets</code> and <code>listGraphs</code> are essentially the same, except that the latter method uses the <code>Interpreters.base64EncodedItemNameInterpreter</code>.  Thus reducing the impact of changes in perhaps temporary conventions to a minimum.</p>
</div>
</div>
<div class="sect3">
<h4 id="_what_remains_to_be_done">What remains to be done</h4>
<div class="ulist">
<ul>
<li>
<p><span class="feature">be able to handle "resource index lists" in discovery and download</span></p>
</li>
<li>
<p><span class="feature">resourcesync discovery should only request the source description document if you pass it a full url. (It currently also downloads all capability lists)</span></p>
</li>
<li>
<p><span class="feature">resourcesync discovery walks the up-chain to get to the source description document if you pass a secondary level document (capabilitylist or resourcelist</span></p>
</li>
<li>
<p><span class="feature">resourcesync discovery returns a list with only the secondary level document if the up-chain cannot be walked</span></p>
</li>
<li>
<p><span class="feature">choose a format for describing the datasets and link it using <code>describedby</code> (something like dcat or VOID ) and make the discovery use that information for presenting the data to the user.</span></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resource_sync_example_server">Resource sync example server</h3>
<div class="sect3">
<h4 id="_background_2">Background</h4>
<div class="paragraph">
<p>Timbuctoo should be able to import RDF-data (n-quads) provided by a resource sync server.
To be able to test this functionality.</p>
</div>
</div>
<div class="sect3">
<h4 id="_how_to_use">How to use</h4>
<div class="paragraph">
<p>Simply run <code>docker-compose up</code> and the service will start at localhost port 80 (default http port).
Open the uri <code><a href="http://localhost/.well-known/resourcesync" class="bare">localhost/.well-known/resourcesync</a></code> to list the resource sync files.</p>
</div>
</div>
<div class="sect3">
<h4 id="_contents_of_this_example_server_2">Contents of this example server</h4>
<div class="paragraph">
<p>According to the resource sync spec we placed the source description (<code>sourcedescription.xml</code>) in the <code>./well-known/resourcesync</code> folder.
This source description sums up the available.</p>
</div>
<div class="paragraph">
<p>Another option is <code>robots.txt</code> that points to the resource list of <code>dataset1</code>.</p>
</div>
<div class="paragraph">
<p>The third option is to use an html or a response with a link to the capability list of a data set.
And example of this is <code>html_with_link.html</code> in teh folder of <code>dataset2</code>.</p>
</div>
<div class="paragraph">
<p>For more information see: <a href="http://www.openarchives.org/rs/1.0/resourcesync#FrameworkOrg" class="bare">www.openarchives.org/rs/1.0/resourcesync#FrameworkOrg</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_solr_index_script">Solr index script</h3>
<div class="sect3">
<h4 id="_summary_5">Summary</h4>
<div class="paragraph">
<p>These ruby scripts harvest the timbuctoo CRUD endpoint, format the data and send it to solr.
For more info follow the link below.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/HuygensING/timbuctoo-faceted-search-indexer/blob/master/README.adoc" class="bare">github.com/HuygensING/timbuctoo-faceted-search-indexer/blob/master/README.adoc</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_user_guide">User guide</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="feature">A user guide has not been written yet</span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api_documentation">API documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="./api.html">API documentation has it&#8217;s own page</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_development_process">Development process</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_releases">Releases</h3>

</div>
<div class="sect2">
<h3 id="_bug_tracking">Bug tracking</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_information">Additional information</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_presentations">Presentations</h3>
<div class="videoblock">
<div class="title">A quick overview of the timbuctoo project</div>
<div class="content">
<iframe src="https://player.vimeo.com/video/186090384" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_related_work">Related work</h3>
<div class="paragraph">
<p>Some things that timbuctoo will not do, and that you can use other software for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>present the data in a faceted search (for this we&#8217;re building a different tool that subscribes to timbuctoo&#8217;s data)</p>
</li>
<li>
<p>clean up datasets (for this we point you to <a href="http://openrefine.org">openrefine</a> and <a href="https://github.com/usc-isi-i2/Web-Karma">karma</a>)</p>
</li>
<li>
<p>visualize the data (for this we&#8217;ll expose the data in timbuctoo in such a way that it can be picked up by tools such as <a href="http://hdlab.stanford.edu/projects/palladio/">palladio</a> or <a href="https://gephi.org/">gephi</a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We will offer a basic editing interface but we&#8217;ll also actively try to allow the data to be edited in external tools such as google spreadsheets, openrefine or excel.</p>
</div>
<div class="sect3">
<h4 id="_databases">Databases</h4>
<div class="paragraph">
<p>For most databases the answer is the same: timbuctoo is not a database, but rather it uses a database and adds a REST API and related
<a href="http://ontotext.com/products/graphdb/" class="bare">ontotext.com/products/graphdb/</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_triple_stores">triple stores</h4>

</div>
<div class="sect3">
<h4 id="_database_wrappers">Database wrappers</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Sandman</dt>
<dt class="hdlist1">Postgres-rest</dt>
<dt class="hdlist1">firebase and other Baas-es</dt>
<dd>
<p>no interlinking and transclusion of datasets</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_mapping_languages">mapping languages</h4>
<div class="paragraph">
<p>X3ML::https://github.com/delving/x3ml <a href="http://139.91.183.3/3M/" class="bare">139.91.183.3/3M/</a>
R2RML::
XSLT::
JSON-LD framing::
XML2RDF::
SQuaRE::
  <a href="http://resources.visualdataweb.de/paper4.pdf" class="bare">resources.visualdataweb.de/paper4.pdf</a>
=== harmonization tools
GoogleRefine/OpenRefine::
karma::
tabulapdf::
UIMA (entity extraction)
Gate (entity extraction)
Silk (link discovery)
Datagraft::
  <a href="https://datagraft.net/" class="bare">datagraft.net/</a> (<a href="https://github.com/dapaas" class="bare">github.com/dapaas</a>)</p>
</div>
<div class="paragraph">
<p>map4rdf
lodlive</p>
</div>
<div class="paragraph">
<p><a href="http://link.springer.com/book/10.1007/978-3-319-13817-6/page/2#page-2" class="bare">link.springer.com/book/10.1007/978-3-319-13817-6/page/2#page-2</a></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">xanadu</dt>
<dd>
<p>At a distance, Xanadu looks like a well-thought out approach at exchanging and re-using data.
The problems that are most similar are (1) keeping track of owner/authorship while having that enables and foster&#8217;s re-use (2) keeping control of the data that was cited without having to depose snapshots at digital heritage institutions.
However, RDF probably differs too much from text to be able to apply these ideas.
You usually exchange it in some serialised, textual, form, but it has no predefined sort-order and re-use/transclusion is not necessarily in a few blocks.
We&#8217;re not aware of any research for building a system that fulfills the xanadu requirements for structured data</p>
</dd>
<dt class="hdlist1">Pelagios</dt>
<dd>
<p><a href="http://dlib.nyu.edu/awdl/isaw/isaw-papers/7/simon-barker-desoto-isaksen/" class="bare">dlib.nyu.edu/awdl/isaw/isaw-papers/7/simon-barker-desoto-isaksen/</a> We&#8217;re thinking about providing the pelagios API&#8217;s from withing timbuctoo.</p>
</dd>
<dt class="hdlist1">Salt</dt>
<dd>
<p>Salt (<a href="http://dl.acm.org/citation.cfm?id=2785528" class="bare">dl.acm.org/citation.cfm?id=2785528</a>)</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-02-15 13:03:47 UTC
</div>
</div>
</body>
</html>